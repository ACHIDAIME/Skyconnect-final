<script>
function showFullDesc(id) {
  document.getElementById('desc-short-' + id).style.display = 'none';
  document.getElementById('desc-full-' + id).style.display = 'inline';
}
function hideFullDesc(id) {
  document.getElementById('desc-full-' + id).style.display = 'none';
  document.getElementById('desc-short-' + id).style.display = 'inline';
}
</script>
<!-- filepath: c:\Users\mirab\Desktop\Stage\skyconnect-finalisation\core\templates\core\sous_categorie_detail.html -->
{% extends 'core/base.html' %}
{% block title %}{{ sous_categorie.nom }} - Sky Connect{% endblock %}

{% block content %}
<section class="container my-5">
  <h2 class="mb-4 fw-bold text-center" style="color:var(--rouge-sky);">{{ sous_categorie.nom }}</h2>
  <p class="text-muted text-center">{{ sous_categorie.description }}</p>
  <div class="row g-4">
    {% for produit in produits %}
      <div class="col-md-3 d-flex align-items-stretch">
        <div class="card h-100 border-danger shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ produit.nom }}</h5>
            {% if produit.image %}
              <a href="{% url 'produit_detail' produit.id %}">
               <img src="{{ produit.image.url }}" alt="{{ produit.nom }}" class="img-fluid mb-2">
               </a>           
             {% endif %}
            <p class="mb-2">
  <span id="desc-short-{{ produit.id }}">
    {{ produit.description|truncatechars:120 }}
    {% if produit.description|length > 120 %}
      <a href="{% url 'produit_detail' produit.id %}" class="btn btn-link p-0" style="color:var(--rouge-sky-lighter);">Voir plus</a>
    {% endif %}
  </span>
  <span id="desc-full-{{ produit.id }}" style="display:none;">
    {{ produit.description }}
    <a href="#" class="text-danger" onclick="hideFullDesc({{ produit.id }}); return false;">Voir moins</a>
  </span>
</p>
            <div class="mt-auto price-halo" style="color:var(--rouge-sky);">{{ produit.prix|floatformat:0 }} GNF</div>
            <a href="{% url 'ajouter_au_panier' produit.id %}" class="btn btn-animated mt-2">Ajouter au panier</a>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <p class="text-muted">Aucun produit dans cette sous-cat√©gorie pour le moment.</p>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}